!function(b){var c,a={},d=[];a.init=function(b,a){a=a||{},(c=b).on("ntp:server_sync",e),setInterval(f,a.interval||1e3)};var e=function(a){var b=Date.now()-a.t1+(Date.now()-a.t0)/2;d.unshift(b),d.length>10&&d.pop()};a.offset=function(){for(var a=0,b=0;b<d.length;b++)a+=d[b];return d.length>0&&(a/=d.length),a};var f=function(){c.emit("ntp:client_sync",{t0:Date.now()})};"function"==typeof define&&define.amd?define("ntp",[],function(){return a}):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=a),exports.ntp=a):b.ntp=a}(window)